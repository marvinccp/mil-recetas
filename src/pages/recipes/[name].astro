---
import "../../styles/Global.css";
import BaseLayout from "../../layouts/base-layout.astro";
export async function getStaticPaths() {
  const data = await (
    await fetch("https://www.themealdb.com/api/json/v1/1/search.php?f=s")
  ).json();

  return data.meals.map((recipe) => {
    return {
      params: { name: recipe.strMeal },
      props: { recipe },
    };
  });
}

const { id } = Astro.params;
const { recipe } = Astro.props;

const noIngredient = "ü•£";
const noValue = "üç¥";
---

<BaseLayout />
<div class="title-container">
  <h1>{recipe.strMeal}</h1>
</div>
<article class="recipe-container">
  <img src={recipe.strMealThumb} alt="" />
  <div class="ingredients-container">
    <h2>ingredients</h2>
    <ul>
      <li>
        {recipe.strIngredient1 || noIngredient} : <span
          >{recipe.strMeasure1 || noValue}
        </span>
      </li>
      <li>
        {recipe.strIngredient2 || noIngredient} : <span
          >{recipe.strMeasure2 || noValue}
        </span>
      </li>
      <li>
        {recipe.strIngredient3 || noIngredient} : <span
          >{recipe.strMeasure3 || noValue}
        </span>
      </li>
      <li>
        {recipe.strIngredient4 || noIngredient} : <span
          >{recipe.strMeasure4 || noValue}
        </span>
      </li>
      <li>
        {recipe.strIngredient5 || noIngredient} : <span
          >{recipe.strMeasure5 || noValue}
        </span>
      </li>
      <li>
        {recipe.strIngredient6 || noIngredient} : <span
          >{recipe.strMeasure6 || noValue}
        </span>
      </li>
      <li>
        {recipe.strIngredient7 || noIngredient} : <span
          >{recipe.strMeasure7 || noValue}
        </span>
      </li>
      <li>
        {recipe.strIngredient8 || noIngredient} : <span
          >{recipe.strMeasure8 || noValue}
        </span>
      </li>
      <li>
        {recipe.strIngredient9 || noIngredient} : <span
          >{recipe.strMeasure9 || noValue}
        </span>
      </li>
      <li>
        {recipe.strIngredient10 || noIngredient} : <span
          >{recipe.strMeasure10 || noValue}
        </span>
      </li>
      <li>
        {recipe.strIngredient11 || noIngredient} : <span
          >{recipe.strMeasure11 || noValue}
        </span>
      </li>
      <li>
        {recipe.strIngredient12 || noIngredient} : <span
          >{recipe.strMeasure12 || noValue}
        </span>
      </li>
      <li>
        {recipe.strIngredient13 || noIngredient} : <span
          >{recipe.strMeasure13 || noValue}
        </span>
      </li>
      <li>
        {recipe.strIngredient14 || noIngredient} : <span
          >{recipe.strMeasure14 || noValue}
        </span>
      </li>
      <li>
        {recipe.strIngredient15 || noIngredient} : <span
          >{recipe.strMeasure15 || noValue}
        </span>
      </li>
      <li>
        {recipe.strIngredient16 || noIngredient} : <span
          >{recipe.strMeasure16 || noValue}
        </span>
      </li>
      <li>
        {recipe.strIngredient17 || noIngredient} : <span
          >{recipe.strMeasure17 || noValue}
        </span>
      </li>
      <li>
        {recipe.strIngredient18 || noIngredient} : <span
          >{recipe.strMeasure18 || noValue}
        </span>
      </li>
      <li>
        {recipe.strIngredient19 || noIngredient} : <span
          >{recipe.strMeasure19 || noValue}
        </span>
      </li>
      <li>
        {recipe.strIngredient20 || noIngredient} : <span
          >{recipe.strMeasure20 || noValue}
        </span>
      </li>
    </ul>
  </div>
  <h2 class="instructions-title">Instructions</h2>
  <p>{recipe.strInstructions}</p>
  <h2 class="instructions-title">Source</h2>
  <a class="source-link" href={recipe.strSource} target="_blank"
    >{recipe.strSource || "No source"}</a
  >
</article>

<style>
  .title-container {
    margin: 150px auto 0 auto;
    display: flex;
    justify-content: center;
    align-items: center;
    width: 90%;
  }
  .recipe-container {
    margin: 30px auto 0 auto;
    width: 90%;
    display: flex;
    flex-direction: column;
  }
  .recipe-container img {
    width: 100%;
  }

  .ingredients-container {
    margin: 30px 0 0 0;
  }
  .ingredients-container ul {
    margin: 30px 0 0 30px;
  }
  .ingredients-container ul li {
    font-size: 1.2rem;
  }
  span {
    margin: 0 0 0 5px;
    color: rgb(76, 76, 76);
    font-weight: bold;
  }
  p {
    margin: 20px 0 0 0;
    font-size: 1.3rem;
  }
  .instructions-title {
    margin: 20px 0 0 0;
  }

  .source-link {
    margin: 0 0 80px 0;
  }
  @media (min-width: 768px) {
    .recipe-container {
      width: 55%;
    }
  }
</style>
